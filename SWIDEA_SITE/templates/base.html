{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì•„ì´ë””ì–´ ì‚¬ì´íŠ¸</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/custom.js' %}"></script>
</head>
<body>
    <nav>
    <ul style="display: flex; align-items: center; list-style: none; background: #111; color: #fff; padding: 10px;">
        <!-- ì™¼ìª½ ì œëª© -->
        <li style="margin-right: 60px; font-weight: bold; font-size: 18px;">
        <a href="{% url 'ideas:idea_list' %}" style="color: #fff; text-decoration: none;">
            My <span style="color: #7CFC00;">SW Idea</span> Manage
        </a>
        </li>

        <!-- ì˜¤ë¥¸ìª½ ë©”ë‰´ -->
        <li style="margin-right: 40px;">
        <a href="{% url 'ideas:idea_add' %}" style="color: #fff; text-decoration: none;">ì•„ì´ë””ì–´ ë“±ë¡</a>
        </li>
        <li style="margin-right: 40px;">
        <a href="{% url 'ideas:idea_list' %}" style="color: #fff; text-decoration: none;">ì•„ì´ë””ì–´ ê´€ë¦¬</a>
        </li>
        <li style="margin-right: 40px;">
        <a href="{% url 'devtools:devtool_add' %}" style="color: #fff; text-decoration: none;">ê°œë°œíˆ´ ë“±ë¡</a>
        </li>
        <li>
        <a href="{% url 'devtools:devtool_list' %}" style="color: #fff; text-decoration: none;">ê°œë°œíˆ´ ê´€ë¦¬</a>
        </li>
    </ul>
    </nav>

    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // â­ ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­
    $('.star-btn').click(function() {
        const ideaId = $(this).data('id');
        const $btn = $(this);  // í˜„ì¬ ë²„íŠ¼ ì°¸ì¡°

        $.ajax({
            url: `/` + ideaId + `/star/`,
            type: 'POST',
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            success: function(response) {
                // â˜… or â˜†ë¡œ ë°”ë¡œ êµì²´
                if (response.starred) {
                    $btn.html('<i class="fas fa-star"></i> ì°œì·¨ì†Œ');
                } else {
                    $btn.html('<i class="far fa-star"></i> ì°œí•˜ê¸°');
                }
                // (ì„ íƒ) ì°œ ê°œìˆ˜ ì—…ë°ì´íŠ¸: $('.star-count').text(response.star_count);
            }
        });
    });

    // ğŸ”¼ğŸ”½ ê´€ì‹¬ë„ +/-
    $('.interest-btn').click(function() {
        const ideaId = $(this).data('id');
        const action = $(this).data('action');
        const $count = $(this).siblings('.interest-count');  // ê°™ì€ ì¹´ë“œ ë‚´ ê´€ì‹¬ë„ í‘œì‹œ

        $.ajax({
            url: `/` + ideaId + `/interest/`,
            type: 'POST',
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            data: {action: action},
            success: function(response) {
                // ê´€ì‹¬ë„ ê°’ë§Œ ì—…ë°ì´íŠ¸
                $count.text(response.interest);
            }
        });
    });
});
</script>

